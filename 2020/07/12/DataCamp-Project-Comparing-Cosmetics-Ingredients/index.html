<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>DataCamp Project Comparing Cosmetics Ingredients | Sueg Zone</title><meta name="description" content="1. Cosmetics, chemicals… it’s complicatedWhenever I want to try a new cosmetic item, it&#39;s so difficult to choose. It&#39;s actually more than difficult. It&#39;s sometimes scary because new items that I&#39;ve ne"><meta name="keywords" content="Data_Visualization, Python, TSNE, Vectorization"><meta name="author" content="Sueg"><meta name="copyright" content="Sueg"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://gxx-s.github.io/2020/07/12/DataCamp-Project-Comparing-Cosmetics-Ingredients/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="DataCamp Project Comparing Cosmetics Ingredients"><meta property="og:url" content="https://gxx-s.github.io/2020/07/12/DataCamp-Project-Comparing-Cosmetics-Ingredients/"><meta property="og:site_name" content="Sueg Zone"><meta property="og:description" content="1. Cosmetics, chemicals… it’s complicatedWhenever I want to try a new cosmetic item, it&#39;s so difficult to choose. It&#39;s actually more than difficult. It&#39;s sometimes scary because new items that I&#39;ve ne"><meta property="og:image" content="https://skincarewell.com/wp-content/uploads/2019/11/SKIN-CARE-INGREDIENTS-1080x675.jpg"><meta property="article:published_time" content="2020-07-12T14:00:14.000Z"><meta property="article:modified_time" content="2020-07-12T14:38:41.104Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="next" title="DataCamp Project Visualizing COVID 19" href="https://gxx-s.github.io/2020/07/10/DataCamp-Project-Visualizing-COVID-19/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">2</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">2</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">1</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Cosmetics-chemicals…-it’s-complicated"><span class="toc-number">1.</span> <span class="toc-text">1. Cosmetics, chemicals… it’s complicated</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Focus-on-one-product-category-and-one-skin-type"><span class="toc-number">2.</span> <span class="toc-text">2. Focus on one product category and one skin type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Tokenizing-the-ingredients"><span class="toc-number">3.</span> <span class="toc-text">3. Tokenizing the ingredients</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Initializing-a-document-term-matrix-DTM"><span class="toc-number">4.</span> <span class="toc-text">4. Initializing a document-term matrix (DTM)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Creating-a-counter-function"><span class="toc-number">5.</span> <span class="toc-text">5. Creating a counter function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-The-Cosmetic-Ingredient-matrix"><span class="toc-number">6.</span> <span class="toc-text">6. The Cosmetic-Ingredient matrix!</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Dimension-reduction-with-t-SNE"><span class="toc-number">7.</span> <span class="toc-text">7. Dimension reduction with t-SNE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Let’s-map-the-items-with-Bokeh"><span class="toc-number">8.</span> <span class="toc-text">8. Let’s map the items with Bokeh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Adding-a-hover-tool"><span class="toc-number">9.</span> <span class="toc-text">9. Adding a hover tool</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Mapping-the-cosmetic-items"><span class="toc-number">10.</span> <span class="toc-text">10. Mapping the cosmetic items</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-Comparing-two-products"><span class="toc-number">11.</span> <span class="toc-text">11. Comparing two products</span></a></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://skincarewell.com/wp-content/uploads/2019/11/SKIN-CARE-INGREDIENTS-1080x675.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Sueg Zone</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">DataCamp Project Comparing Cosmetics Ingredients</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="Created 2020-07-12 22:00:14"><i class="far fa-calendar-alt fa-fw"></i> Created 2020-07-12</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="Updated 2020-07-12 22:38:41"><i class="fas fa-history fa-fw"></i> Updated 2020-07-12</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/Data-Science/">Data_Science</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="1-Cosmetics-chemicals…-it’s-complicated"><a href="#1-Cosmetics-chemicals…-it’s-complicated" class="headerlink" title="1. Cosmetics, chemicals… it’s complicated"></a>1. Cosmetics, chemicals… it’s complicated</h2><p>Whenever I want to try a new cosmetic item, it's so difficult to choose. It's actually more than difficult. It's sometimes scary because new items that I've never tried end up giving me skin trouble. We know the information we need is on the back of each product, but it's really hard to interpret those ingredient lists unless you're a chemist. You may be able to relate to this situation.</p>
<p><img src= "/img/loading.gif" data-src="https://assets.datacamp.com/production/project_695/img/image_1.png" style="width:600px;height:400px;"></p>
<p>So instead of buying and hoping for the best, why don't we use data science to help us predict which products may be good fits for us? In this notebook, we are going to create a content-based recommendation system where the 'content' will be the chemical components of cosmetics. Specifically, we will process ingredient lists for 1472 cosmetics on Sephora via <a href="https://en.wikipedia.org/wiki/Word_embedding" target="_blank" rel="noopener">word embedding</a>, then visualize ingredient similarity using a machine learning method called t-SNE and an interactive visualization library called Bokeh. Let's inspect our data first.</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import libraries</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.manifold <span class="keyword">import</span> TSNE </span><br><span class="line"></span><br><span class="line"><span class="comment"># Load the data</span></span><br><span class="line">df = pd.read_csv(<span class="string">"datasets/cosmetics.csv"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check the first five rows </span></span><br><span class="line">df.sample(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Inspect the types of products</span></span><br><span class="line">df[<span class="string">'Label'</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>Moisturizer    298
Cleanser       281
Face Mask      266
Treatment      248
Eye cream      209
Sun protect    170
Name: Label, dtype: int64</code></pre><h2 id="2-Focus-on-one-product-category-and-one-skin-type"><a href="#2-Focus-on-one-product-category-and-one-skin-type" class="headerlink" title="2. Focus on one product category and one skin type"></a>2. Focus on one product category and one skin type</h2><p>There are six categories of product in our data (<strong><em>moisturizers, cleansers, face masks, eye creams</em></strong>, and <strong><em>sun protection</em></strong>) and there are five different skin types (<strong><em>combination, dry, normal, oily</em></strong> and <strong><em>sensitive</em></strong>). Because individuals have different product needs as well as different skin types, let's set up our workflow so its outputs (a t-SNE model and a visualization of that model) can be customized. For the example in this notebook, let's focus in on moisturizers for those with dry skin by filtering the data accordingly.</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Filter for moisturizers</span></span><br><span class="line">moisturizers = df[df[<span class="string">'Label'</span>] == <span class="string">'Moisturizer'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Filter for dry skin as well</span></span><br><span class="line">moisturizers_dry = moisturizers[moisturizers[<span class="string">'Dry'</span>] == <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reset index</span></span><br><span class="line">moisturizers_dry = moisturizers_dry.reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">moisturizers_dry.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Label</th>
      <th>Brand</th>
      <th>Name</th>
      <th>Price</th>
      <th>Rank</th>
      <th>Ingredients</th>
      <th>Combination</th>
      <th>Dry</th>
      <th>Normal</th>
      <th>Oily</th>
      <th>Sensitive</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Moisturizer</td>
      <td>LA MER</td>
      <td>Crème de la Mer</td>
      <td>175</td>
      <td>4.1</td>
      <td>Algae (Seaweed) Extract, Mineral Oil, Petrolat...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Moisturizer</td>
      <td>SK-II</td>
      <td>Facial Treatment Essence</td>
      <td>179</td>
      <td>4.1</td>
      <td>Galactomyces Ferment Filtrate (Pitera), Butyle...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Moisturizer</td>
      <td>DRUNK ELEPHANT</td>
      <td>Protini™ Polypeptide Cream</td>
      <td>68</td>
      <td>4.4</td>
      <td>Water, Dicaprylyl Carbonate, Glycerin, Ceteary...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Moisturizer</td>
      <td>LA MER</td>
      <td>The Moisturizing Soft Cream</td>
      <td>175</td>
      <td>3.8</td>
      <td>Algae (Seaweed) Extract, Cyclopentasiloxane, P...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Moisturizer</td>
      <td>IT COSMETICS</td>
      <td>Your Skin But Better™ CC+™ Cream with SPF 50+</td>
      <td>38</td>
      <td>4.1</td>
      <td>Water, Snail Secretion Filtrate, Phenyl Trimet...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="3-Tokenizing-the-ingredients"><a href="#3-Tokenizing-the-ingredients" class="headerlink" title="3. Tokenizing the ingredients"></a>3. Tokenizing the ingredients</h2><p>To get to our end goal of comparing ingredients in each product, we first need to do some preprocessing tasks and bookkeeping of the actual words in each product's ingredients list. The first step will be tokenizing the list of ingredients in <code>Ingredients</code> column. After splitting them into tokens, we'll make a binary bag of words. Then we will create a dictionary with the tokens, <code>ingredient_idx</code>, which will have the following format:</p>
<p>{ <strong><em>"ingredient"</em></strong>: index value, ... }</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize dictionary, list, and initial index</span></span><br><span class="line">ingredient_idx = &#123;&#125;</span><br><span class="line">corpus = []</span><br><span class="line">idx = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># For loop for tokenization</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(moisturizers_dry)):    </span><br><span class="line">    ingredients = moisturizers_dry[<span class="string">'Ingredients'</span>][i]</span><br><span class="line">    ingredients_lower = ingredients.lower()</span><br><span class="line">    </span><br><span class="line">    tokens = ingredients_lower.split(<span class="string">', '</span>)</span><br><span class="line">    corpus.append(tokens)</span><br><span class="line">    <span class="keyword">for</span> ingredient <span class="keyword">in</span> tokens:</span><br><span class="line">        <span class="keyword">if</span> ingredient <span class="keyword">not</span> <span class="keyword">in</span> ingredient_idx:</span><br><span class="line">            ingredient_idx[ingredient] = idx</span><br><span class="line">            idx += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line"><span class="comment"># Check the result </span></span><br><span class="line">print(<span class="string">"The index for decyl oleate is"</span>, ingredient_idx[<span class="string">'decyl oleate'</span>])</span><br></pre></td></tr></table></figure>

<pre><code>The index for decyl oleate is 25</code></pre><h2 id="4-Initializing-a-document-term-matrix-DTM"><a href="#4-Initializing-a-document-term-matrix-DTM" class="headerlink" title="4. Initializing a document-term matrix (DTM)"></a>4. Initializing a document-term matrix (DTM)</h2><p>The next step is making a document-term matrix (DTM). Here each cosmetic product will correspond to a document, and each chemical composition will correspond to a term. This means we can think of the matrix as a <em>“cosmetic-ingredient”</em> matrix. The size of the matrix should be as the picture shown below.
<img src= "/img/loading.gif" data-src="https://assets.datacamp.com/production/project_695/img/image_2.PNG" style="width:600px;height:250px;">
To create this matrix, we'll first make an empty matrix filled with zeros. The length of the matrix is the total number of cosmetic products in the data. The width of the matrix is the total number of ingredients. After initializing this empty matrix, we'll fill it in the following tasks. </p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get the number of items and tokens </span></span><br><span class="line">M = len(moisturizers_dry)</span><br><span class="line">N = len(ingredient_idx)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Initialize a matrix of zeros</span></span><br><span class="line">A = np.zeros((M, N))</span><br></pre></td></tr></table></figure>

<h2 id="5-Creating-a-counter-function"><a href="#5-Creating-a-counter-function" class="headerlink" title="5. Creating a counter function"></a>5. Creating a counter function</h2><p>Before we can fill the matrix, let's create a function to count the tokens (i.e., an ingredients list) for each row. Our end goal is to fill the matrix with 1 or 0: if an ingredient is in a cosmetic, the value is 1. If not, it remains 0. The name of this function, <code>oh_encoder</code>, will become clear next.</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define the oh_encoder function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">oh_encoder</span><span class="params">(tokens)</span>:</span></span><br><span class="line">    x = np.zeros(N)</span><br><span class="line">    <span class="keyword">for</span> ingredient <span class="keyword">in</span> tokens:</span><br><span class="line">        <span class="comment"># Get the index for each ingredient</span></span><br><span class="line">        idx= ingredient_idx[ingredient] </span><br><span class="line">        <span class="comment"># Put 1 at the corresponding indices</span></span><br><span class="line">        x[idx] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>

<h2 id="6-The-Cosmetic-Ingredient-matrix"><a href="#6-The-Cosmetic-Ingredient-matrix" class="headerlink" title="6. The Cosmetic-Ingredient matrix!"></a>6. The Cosmetic-Ingredient matrix!</h2><p>Now we'll apply the <code>oh_encoder()</code> functon to the tokens in <code>corpus</code> and set the values at each row of this matrix. So the result will tell us what ingredients each item is composed of. For example, if a cosmetic item contains <em>water, niacin, decyl aleate</em> and <em>sh-polypeptide-1</em>, the outcome of this item will be as follows. 
<img src= "/img/loading.gif" data-src="https://assets.datacamp.com/production/project_695/img/image_3.PNG" style="width:800px;height:400px;">
This is what we called one-hot encoding. By encoding each ingredient in the items, the <em>Cosmetic-Ingredient</em> matrix will be filled with binary values. </p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Make a document-term matrix</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> tokens <span class="keyword">in</span> corpus:</span><br><span class="line">    A[i, :] = oh_encoder(tokens)</span><br><span class="line">    i +=<span class="number">1</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(A)</span><br></pre></td></tr></table></figure>

<pre><code>[[1. 1. 1. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]
 ...
 [0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 1. 1. 1.]]</code></pre><h2 id="7-Dimension-reduction-with-t-SNE"><a href="#7-Dimension-reduction-with-t-SNE" class="headerlink" title="7. Dimension reduction with t-SNE"></a>7. Dimension reduction with t-SNE</h2><p>The dimensions of the existing matrix is (190, 2233), which means there are 2233 features in our data. For visualization, we should downsize this into two dimensions. We'll use t-SNE for reducing the dimension of the data here.</p>
<p><strong><a href="https://en.wikipedia.org/wiki/T-distributed_stochastic_neighbor_embedding" target="_blank" rel="noopener">T-distributed Stochastic Neighbor Embedding (t-SNE)</a></strong> is a nonlinear dimensionality reduction technique that is well-suited for embedding high-dimensional data for visualization in a low-dimensional space of two or three dimensions. Specifically, this technique can reduce the dimension of data while keeping the similarities between the instances. This enables us to make a plot on the coordinate plane, which can be said as vectorizing. All of these cosmetic items in our data will be vectorized into two-dimensional coordinates, and the distances between the points will indicate the similarities between the items. </p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dimension reduction with t-SNE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Learning rates above 200 produce the ball effect that the t-SNE documentation warns about. </span></span><br><span class="line"><span class="comment"># The sweet spot appears to be learning rate values between 50 and 200. </span></span><br><span class="line">model = TSNE(n_components =<span class="number">2</span>,learning_rate = <span class="number">200</span>, random_state = <span class="number">42</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply the fit_transform() method of model to the matrix A. </span></span><br><span class="line"><span class="comment"># fit_transform() Fit A into an embedded space and return that transformed output.</span></span><br><span class="line">tsne_features = model.fit_transform(A)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make X, Y columns </span></span><br><span class="line">moisturizers_dry[<span class="string">'X'</span>] = tsne_features[:,<span class="number">0</span>]</span><br><span class="line">moisturizers_dry[<span class="string">'Y'</span>] = tsne_features[:,<span class="number">1</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(tsne_features)</span><br></pre></td></tr></table></figure>

<pre><code>[[-0.07274032  3.230559  ]
 [ 0.24254107 -1.7431899 ]
 [-0.4328002  -1.6507508 ]
 [-0.8838139   3.5703228 ]
 [-3.1032133   2.3088033 ]
 [-3.4628832  -0.08611522]
 [-0.29326192 -0.29001248]
 [-1.8281056   1.4165062 ]
 [-0.32282943  0.6242277 ]
 [-0.30637565  1.1592927 ]
 [-1.7151616  -1.0252191 ]
 [-3.6147594  -0.08380067]
 [-2.4259148  -0.41015157]
 [ 0.72282094  1.8292323 ]
 [ 0.5529415  -2.1381166 ]
 [-0.07480411  3.22883   ]
 [-0.10165863 -2.142008  ]
 [ 1.4666576  -0.28508312]
 [-0.28805432 -0.2867642 ]
 [ 0.8595717  -1.6623012 ]
 [ 0.4289137   0.34691742]
 [ 1.0712835  -3.5376668 ]
 [ 1.4504902   1.2961657 ]
 [-0.2956107  -0.2871681 ]
 [-0.29694226 -0.2862101 ]
 [-3.0912042   2.3080356 ]
 [-2.760984    0.62906086]
 [-2.8590186   0.96467733]
 [ 0.24105166 -1.7431622 ]
 [ 2.3880482   1.4465327 ]
 [-1.9007543  -3.00526   ]
 [-1.0134128  -0.88950586]
 [-0.61422074  0.5674094 ]
 [-1.7642056   0.3017212 ]
 [-1.2047304  -0.5994588 ]
 [-1.318808    0.46632615]
 [-0.17942885 -0.17514543]
 [-0.85892123  0.39935032]
 [-1.2032648   3.3288577 ]
 [-0.17206591  0.09151381]
 [-1.4109522   1.7213656 ]
 [ 0.3596597   0.4061851 ]
 [-1.263443   -1.9470034 ]
 [ 2.3701172   1.3089119 ]
 [ 1.5574732  -0.8222898 ]
 [ 2.7753642  -0.27443352]
 [-0.070212   -2.1659079 ]
 [ 1.2170342  -0.9532446 ]
 [ 2.044429    0.29214755]
 [-1.0455259   0.1255519 ]
 [-3.0976238   2.3105829 ]
 [ 2.4003334   1.4255276 ]
 [ 0.23178269 -3.0016696 ]
 [-1.0786383  -0.02791321]
 [-0.16082028  0.4705244 ]
 [ 2.8149054  -0.27790943]
 [-2.1684399  -1.7149538 ]
 [ 0.94991976 -1.2522936 ]
 [-1.4167352  -1.2632219 ]
 [ 0.24022055 -1.2390716 ]
 [-1.356025   -1.2737398 ]
 [-2.8325176  -0.60234046]
 [-0.44342762  1.8910878 ]
 [-0.4719345  -1.655153  ]
 [-2.5421736  -1.7490462 ]
 [-1.1119591  -0.02694684]
 [ 0.66575855 -0.12442486]
 [-0.29559243 -0.28716797]
 [-2.7190008   0.8864275 ]
 [-0.29215717 -0.28959075]
 [-1.0476847  -1.1407758 ]
 [ 0.58014685  0.12942746]
 [ 1.3588034  -1.4553039 ]
 [ 0.43711165 -1.2358446 ]
 [-0.74666315 -1.0611918 ]
 [ 0.6537596  -0.07833288]
 [ 0.6112492   1.040472  ]
 [ 0.3299386   0.42401034]
 [ 1.1059549  -0.4840335 ]
 [-0.19597343  0.47765443]
 [ 0.27846903 -0.754901  ]
 [-1.1742108  -0.5697167 ]
 [-0.7243998  -1.2389636 ]
 [-0.37435362 -0.9135038 ]
 [-0.29378745 -0.28785992]
 [-0.02207389  1.75594   ]
 [ 0.51830906 -0.6152948 ]
 [-1.1488158  -0.67524284]
 [-0.55840194  0.9671981 ]
 [-1.7507917  -1.7243778 ]
 [-0.658074   -1.5494511 ]
 [ 0.18530796 -2.775915  ]
 [-2.4259186  -0.86097753]
 [ 1.0303177   0.7273587 ]
 [-0.6907709  -0.91336554]
 [-0.29499975 -0.28974518]
 [ 0.6443538  -1.1827631 ]
 [-0.8826974  -2.802067  ]
 [ 1.0827215   0.08759339]
 [-0.59284645  0.9775999 ]
 [ 1.0661093  -3.5324776 ]
 [ 1.7226769  -2.4598405 ]
 [-0.79403275  1.4307978 ]
 [-0.28526488 -0.28728062]
 [-2.0315683   0.1175956 ]
 [-1.0413254  -0.04192849]
 [-0.2904223  -0.28871852]
 [-2.6074023  -0.58408284]
 [-0.29574275 -0.28902128]
 [-0.2923049  -0.28958812]
 [ 3.1766784  -2.2461648 ]
 [-0.8813483   3.5652654 ]
 [ 2.180505   -1.0767941 ]
 [ 0.7221469  -0.34782362]
 [-0.29286408 -0.2858988 ]
 [-1.9721596  -3.121444  ]
 [ 0.94659364 -1.861471  ]
 [-1.2050356   3.3296018 ]
 [-0.18812636 -0.9621683 ]
 [ 1.5147516   1.4102283 ]
 [-1.4898661  -1.4488323 ]
 [-1.7261549  -1.0545181 ]
 [ 1.578856    0.02261309]
 [ 1.0396415   0.42555577]
 [ 1.5561936   2.7148001 ]
 [ 1.2959787   0.47187704]
 [-0.2928316  -0.2893377 ]
 [-1.6515329  -2.0725646 ]
 [-0.81155473  1.8846887 ]
 [-1.3452713  -1.5094835 ]
 [-0.2920891  -0.2888913 ]
 [ 0.14231306 -1.5255463 ]
 [-0.29183578 -0.28770632]
 [ 0.8400001   1.011303  ]
 [ 0.7226959   1.8302201 ]
 [-0.28960463 -0.2856339 ]
 [-1.2717667   0.90278053]
 [ 0.6447969  -2.5051298 ]
 [-0.0055203   1.8300655 ]
 [-1.5480796   0.8089267 ]
 [-2.2254298  -1.6588807 ]
 [ 2.20856     0.31714457]
 [-0.46555763 -2.2333105 ]
 [-0.4531363   0.5570442 ]
 [-1.725792    1.2635354 ]
 [ 0.1310755   0.63642454]
 [-1.3716646  -2.2186193 ]
 [-1.9019448  -1.1393372 ]
 [-1.9856821  -3.1985075 ]
 [ 2.3311112  -1.166031  ]
 [-0.8831829  -2.2446644 ]
 [ 1.6603585  -2.3160143 ]
 [ 0.28674418  1.2572587 ]
 [-0.8867271  -3.0683522 ]
 [-0.29197818 -0.28783822]
 [ 0.55000615 -0.54101276]
 [-0.29547265 -0.29160637]
 [-0.29285175 -0.28543806]
 [ 0.48850462 -0.5698929 ]
 [-2.5044096   0.83402973]
 [-1.1022509   0.44084942]
 [-3.4377377  -1.3528556 ]
 [ 0.15686148  0.8870349 ]
 [ 3.1708052  -2.2487094 ]
 [-0.29208916 -0.28889048]
 [-1.5474257  -0.404199  ]
 [-1.8926986   0.04971005]
 [-0.7082449  -1.7991059 ]
 [-1.1237799   1.4966652 ]
 [-0.29188034 -0.11954292]
 [-0.291021   -0.28599426]
 [-0.29171088 -0.2893388 ]
 [ 0.50548923  0.24820966]
 [ 0.24275531 -1.2429821 ]
 [ 1.5891204   2.7240036 ]
 [ 0.4695567  -0.5475371 ]
 [-0.2815074  -0.28949174]
 [-0.8028812   0.1005613 ]
 [-0.28683504 -0.28853226]
 [ 0.12096563 -1.216989  ]
 [-0.28790307 -0.28993458]
 [-3.2861433  -1.2853138 ]
 [-0.32029915 -0.28796923]
 [-0.39503923 -3.1110787 ]
 [ 1.6060495  -0.6216086 ]
 [-1.0967462   0.6521838 ]
 [ 1.331309   -1.5952606 ]
 [-1.8727602  -0.37265173]
 [-1.536723   -0.3635636 ]
 [-0.01464373  1.1108118 ]]</code></pre><h2 id="8-Let’s-map-the-items-with-Bokeh"><a href="#8-Let’s-map-the-items-with-Bokeh" class="headerlink" title="8. Let’s map the items with Bokeh"></a>8. Let’s map the items with Bokeh</h2><p>We are now ready to start creating our plot. With the t-SNE values, we can plot all our items on the coordinate plane. And the coolest part here is that it will also show us the name, the brand, the price and the rank of each item. Let's make a scatter plot using Bokeh and add a hover tool to show that information. Note that we won't display the plot yet as we will make some more additions to it.</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.io <span class="keyword">import</span> show, output_notebook, push_notebook</span><br><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure</span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> ColumnDataSource, HoverTool</span><br><span class="line">output_notebook()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make a source and a scatter plot. ColumnDateSource Maps names of columns to sequences or arrays.</span></span><br><span class="line">source = ColumnDataSource(moisturizers_dry)</span><br><span class="line">plot = figure(x_axis_label = <span class="string">'T-SNE 1'</span>, </span><br><span class="line">              y_axis_label = <span class="string">'T-SNE 2'</span>, </span><br><span class="line">              width = <span class="number">500</span>, height = <span class="number">400</span>)</span><br><span class="line">plot.circle(x = <span class="string">'X'</span>, </span><br><span class="line">    y = <span class="string">'Y'</span>, </span><br><span class="line">    source = source, </span><br><span class="line">    size = <span class="number">10</span>, color = <span class="string">'#FF7373'</span>, alpha = <span class="number">.8</span>)</span><br></pre></td></tr></table></figure>



<div class="bk-root">
    <a href="https://bokeh.pydata.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1001">Loading BokehJS ...</span>
</div>







<div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.renderers.GlyphRenderer">GlyphRenderer</b>(</div><div style="display: table-cell;">id&nbsp;=&nbsp;'1038', <span id="1041" style="cursor: pointer;">&hellip;)</span></div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">data_source&nbsp;=&nbsp;ColumnDataSource(id='1002', ...),</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">glyph&nbsp;=&nbsp;Circle(id='1036', ...),</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">hover_glyph&nbsp;=&nbsp;None,</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks&nbsp;=&nbsp;{},</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks&nbsp;=&nbsp;{},</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">level&nbsp;=&nbsp;'glyph',</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted&nbsp;=&nbsp;False,</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted_glyph&nbsp;=&nbsp;None,</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name&nbsp;=&nbsp;None,</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">nonselection_glyph&nbsp;=&nbsp;Circle(id='1037', ...),</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selection_glyph&nbsp;=&nbsp;None,</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events&nbsp;=&nbsp;[],</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags&nbsp;=&nbsp;[],</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">view&nbsp;=&nbsp;CDSView(id='1039', ...),</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">visible&nbsp;=&nbsp;True,</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">x_range_name&nbsp;=&nbsp;'default',</div></div><div class="1040" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">y_range_name&nbsp;=&nbsp;'default')</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("1041");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("1040");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "&hellip;)" : "&lsaquo;&lsaquo;&lsaquo;";
    expanded = !expanded;
  });
})();
</script>




<h2 id="9-Adding-a-hover-tool"><a href="#9-Adding-a-hover-tool" class="headerlink" title="9. Adding a hover tool"></a>9. Adding a hover tool</h2><p>Why don't we add a hover tool? Adding a hover tool allows us to check the information of each item whenever the cursor is directly over a glyph. We'll add tooltips with each product's name, brand, price, and rank (i.e., rating).</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a HoverTool object</span></span><br><span class="line">hover = HoverTool(tooltips = [(<span class="string">'Item'</span>,<span class="string">'@Name'</span>),</span><br><span class="line">                              (<span class="string">'Brand'</span>,<span class="string">'@Brand'</span>),</span><br><span class="line">                              (<span class="string">'Price'</span>,<span class="string">'$@Price'</span>),</span><br><span class="line">                              (<span class="string">'Rank'</span>, <span class="string">'@Rank'</span>)])</span><br><span class="line">plot.add_tools(hover)</span><br></pre></td></tr></table></figure>

<h2 id="10-Mapping-the-cosmetic-items"><a href="#10-Mapping-the-cosmetic-items" class="headerlink" title="10. Mapping the cosmetic items"></a>10. Mapping the cosmetic items</h2><p>Finally, it's show time! Let's see how the map we've made looks like. Each point on the plot corresponds to the cosmetic items. Then what do the axes mean here? The axes of a t-SNE plot aren't easily interpretable in terms of the original data. Like mentioned above, t-SNE is a visualizing technique to plot high-dimensional data in a low-dimensional space. Therefore, it's not desirable to interpret a t-SNE plot quantitatively.</p>
<p>Instead, what we can get from this map is the distance between the points (which items are close and which are far apart). The closer the distance between the two items is, the more similar the composition they have. Therefore this enables us to compare the items without having any chemistry background.</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Plot the map</span></span><br><span class="line">show(plot)</span><br></pre></td></tr></table></figure>
<p> A screenshot of what you can see on the dashboard:

<p><img src= "/img/loading.gif" data-src="output_1.png" alt="png"></p>
<div class="bk-root" id="558176c6-9821-43d9-afa6-0ea469a7514f" data-root-id="1003"></div>





<h2 id="11-Comparing-two-products"><a href="#11-Comparing-two-products" class="headerlink" title="11. Comparing two products"></a>11. Comparing two products</h2><p>Since there are so many cosmetics and so many ingredients, the plot doesn't have many super obvious patterns that simpler t-SNE plots can have (<a href="https://campus.datacamp.com/courses/unsupervised-learning-in-python/visualization-with-hierarchical-clustering-and-t-sne?ex=10" target="_blank" rel="noopener">example</a>). Our plot requires some digging to find insights, but that's okay!</p>
<p>Say we enjoyed a specific product, there's an increased chance we'd enjoy another product that is similar in chemical composition.  Say we enjoyed AmorePacific's <a href="https://www.sephora.com/product/color-control-cushion-compact-broad-spectrum-spf-50-P378121" target="_blank" rel="noopener">Color Control Cushion Compact Broad Spectrum SPF 50+</a>. We could find this product on the plot and see if a similar product(s) exist. And it turns out it does! If we look at the points furthest left on the plot, we see  LANEIGE's <a href="https://www.sephora.com/product/bb-cushion-hydra-radiance-P420676" target="_blank" rel="noopener">BB Cushion Hydra Radiance SPF 50</a> essentially overlaps with the AmorePacific product. By looking at the ingredients, we can visually confirm the compositions of the products are similar (<em>though it is difficult to do, which is why we did this analysis in the first place!</em>), plus LANEIGE's version is $22 cheaper and actually has higher ratings.</p>
<p>It's not perfect, but it's useful. In real life, we can actually use our little ingredient-based recommendation engine help us make educated cosmetic purchase choices.</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Print the ingredients of two similar cosmetics</span></span><br><span class="line">cosmetic_1 = moisturizers_dry[moisturizers_dry[<span class="string">'Name'</span>] == <span class="string">"Color Control Cushion Compact Broad Spectrum SPF 50+"</span>]</span><br><span class="line">cosmetic_2 = moisturizers_dry[moisturizers_dry[<span class="string">'Name'</span>] == <span class="string">"BB Cushion Hydra Radiance SPF 50"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Display each item's data and ingredients</span></span><br><span class="line">display(cosmetic_1)</span><br><span class="line">print(cosmetic_1.Ingredients.values)</span><br><span class="line">display(cosmetic_2)</span><br><span class="line">print(cosmetic_2.Ingredients.values)</span><br></pre></td></tr></table></figure>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Label</th>
      <th>Brand</th>
      <th>Name</th>
      <th>Price</th>
      <th>Rank</th>
      <th>Ingredients</th>
      <th>Combination</th>
      <th>Dry</th>
      <th>Normal</th>
      <th>Oily</th>
      <th>Sensitive</th>
      <th>X</th>
      <th>Y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>45</td>
      <td>Moisturizer</td>
      <td>AMOREPACIFIC</td>
      <td>Color Control Cushion Compact Broad Spectrum S...</td>
      <td>60</td>
      <td>4.0</td>
      <td>Phyllostachis Bambusoides Juice, Cyclopentasil...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2.775364</td>
      <td>-0.274434</td>
    </tr>
  </tbody>
</table>
</div>


<pre><code>[&apos;Phyllostachis Bambusoides Juice, Cyclopentasiloxane, Cyclohexasiloxane, Peg-10 Dimethicone, Phenyl Trimethicone, Butylene Glycol, Butylene Glycol Dicaprylate/Dicaprate, Alcohol, Arbutin, Lauryl Peg-9 Polydimethylsiloxyethyl Dimethicone, Acrylates/Ethylhexyl Acrylate/Dimethicone Methacrylate Copolymer, Polyhydroxystearic Acid, Sodium Chloride, Polymethyl Methacrylate, Aluminium Hydroxide, Stearic Acid, Disteardimonium Hectorite, Triethoxycaprylylsilane, Ethylhexyl Palmitate, Lecithin, Isostearic Acid, Isopropyl Palmitate, Phenoxyethanol, Polyglyceryl-3 Polyricinoleate, Acrylates/Stearyl Acrylate/Dimethicone Methacrylate Copolymer, Dimethicone, Disodium Edta, Trimethylsiloxysilicate, Ethylhexyglycerin, Dimethicone/Vinyl Dimethicone Crosspolymer, Water, Silica, Camellia Japonica Seed Oil, Camillia Sinensis Leaf Extract, Caprylyl Glycol, 1,2-Hexanediol, Fragrance, Titanium Dioxide, Iron Oxides (Ci 77492, Ci 77491, Ci77499).&apos;]</code></pre><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Label</th>
      <th>Brand</th>
      <th>Name</th>
      <th>Price</th>
      <th>Rank</th>
      <th>Ingredients</th>
      <th>Combination</th>
      <th>Dry</th>
      <th>Normal</th>
      <th>Oily</th>
      <th>Sensitive</th>
      <th>X</th>
      <th>Y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>55</td>
      <td>Moisturizer</td>
      <td>LANEIGE</td>
      <td>BB Cushion Hydra Radiance SPF 50</td>
      <td>38</td>
      <td>4.3</td>
      <td>Water, Cyclopentasiloxane, Zinc Oxide (CI 7794...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2.814905</td>
      <td>-0.277909</td>
    </tr>
  </tbody>
</table>
</div>


<pre><code>[&apos;Water, Cyclopentasiloxane, Zinc Oxide (CI 77947), Ethylhexyl Methoxycinnamate, PEG-10 Dimethicone, Cyclohexasiloxane, Phenyl Trimethicone, Iron Oxides (CI 77492), Butylene Glycol Dicaprylate/Dicaprate, Niacinamide, Lauryl PEG-9 Polydimethylsiloxyethyl Dimethicone, Acrylates/Ethylhexyl Acrylate/Dimethicone Methacrylate Copolymer, Titanium Dioxide (CI 77891 , Iron Oxides (CI 77491), Butylene Glycol, Sodium Chloride, Iron Oxides (CI 77499), Aluminum Hydroxide, HDI/Trimethylol Hexyllactone Crosspolymer, Stearic Acid, Methyl Methacrylate Crosspolymer, Triethoxycaprylylsilane, Phenoxyethanol, Fragrance, Disteardimonium Hectorite, Caprylyl Glycol, Yeast Extract, Acrylates/Stearyl Acrylate/Dimethicone Methacrylate Copolymer, Dimethicone, Trimethylsiloxysilicate, Polysorbate 80, Disodium EDTA, Hydrogenated Lecithin, Dimethicone/Vinyl Dimethicone Crosspolymer, Mica (CI 77019), Silica, 1,2-Hexanediol, Polypropylsilsesquioxane, Chenopodium Quinoa Seed Extract, Magnesium Sulfate, Calcium Chloride, Camellia Sinensis Leaf Extract, Manganese Sulfate, Zinc Sulfate, Ascorbyl Glucoside.&apos;]</code></pre></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Sueg</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://gxx-s.github.io/2020/07/12/DataCamp-Project-Comparing-Cosmetics-Ingredients/">https://gxx-s.github.io/2020/07/12/DataCamp-Project-Comparing-Cosmetics-Ingredients/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Data-Visualization-Python-TSNE-Vectorization/">Data_Visualization, Python, TSNE, Vectorization</a></div><div class="post_share"><div class="social-share" data-image="https://skincarewell.com/wp-content/uploads/2019/11/SKIN-CARE-INGREDIENTS-1080x675.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2020/07/10/DataCamp-Project-Visualizing-COVID-19/"><img class="next-cover" data-src="https://www.nps.gov/aboutus/news/images/CDC-coronavirus-image-23311-for-web.jpg?maxwidth=650&amp;autorotate=false" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">DataCamp Project Visualizing COVID 19</div></div></a></div></nav></article></main><footer id="footer" style="background-image: url(https://skincarewell.com/wp-content/uploads/2019/11/SKIN-CARE-INGREDIENTS-1080x675.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Sueg</div><div class="framework-info"><span>Driven </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font_plus" title="Increase Font Size"><i class="fas fa-plus"></i></button><button id="font_minus" title="Decrease Font Size"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="Setting"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"width":220,"height":440,"position":"left","hOffset":0,"vOffset":-50},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"tagMode":false});</script></body></html><!-- 雪花特效 -->
<script type="text/javascript" src="http://libs.baidu.com/jquery/1.8.3/jquery.js"></script>
<script type="text/javascript" src="http://libs.baidu.com/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="\js\snow.js"></script>